{"ast":null,"code":"import NextAuth from 'next-auth';\nimport Providers from 'next-auth/providers';\nconst providers = [Providers.GitHub({\n  clientId: process.env.GITHUB_CLIENT_ID,\n  clientSecret: process.env.GITHUB_CLIENT_SECRET\n})];\nconst callbacks = {};\n\ncallbacks.signIn = async function signIn(user, account, metadata) {\n  const emailRes = await fetch('https://api.github.com/user/emails', {\n    headers: {\n      'Authorization': `token ${account.accessToken}`\n    }\n  });\n  const emails = await emailRes.json();\n  const primaryEmail = emails.find(e => e.primary).email;\n  user.email = primaryEmail;\n};\n\nconst options = {\n  providers,\n  callbacks\n};\nexport default ((req, res) => NextAuth(req, res, options));","map":{"version":3,"sources":["/Users/jaydesai1/bulletproof-next-app/pages/api/auth/[...nextauth].js"],"names":["NextAuth","Providers","providers","GitHub","clientId","process","env","GITHUB_CLIENT_ID","clientSecret","GITHUB_CLIENT_SECRET","callbacks","signIn","user","account","metadata","emailRes","fetch","headers","accessToken","emails","json","primaryEmail","find","e","primary","email","options","req","res"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,WAArB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AAGA,MAAMC,SAAS,GAAG,CACdD,SAAS,CAACE,MAAV,CAAiB;AACbC,EAAAA,QAAQ,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADT;AAEbC,EAAAA,YAAY,EAAEH,OAAO,CAACC,GAAR,CAAYG;AAFb,CAAjB,CADc,CAAlB;AAOA,MAAMC,SAAS,GAAG,EAAlB;;AAEAA,SAAS,CAACC,MAAV,GAAmB,eAAeA,MAAf,CAAsBC,IAAtB,EAA4BC,OAA5B,EAAqCC,QAArC,EAA+C;AAC9D,QAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,oCAAD,EAAuC;AACjEC,IAAAA,OAAO,EAAE;AACP,uBAAkB,SAAQJ,OAAO,CAACK,WAAY;AADvC;AADwD,GAAvC,CAA5B;AAKA,QAAMC,MAAM,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAArB;AACA,QAAMC,YAAY,GAAGF,MAAM,CAACG,IAAP,CAAYC,CAAC,IAAIA,CAAC,CAACC,OAAnB,EAA4BC,KAAjD;AAEAb,EAAAA,IAAI,CAACa,KAAL,GAAaJ,YAAb;AACH,CAVD;;AAYA,MAAMK,OAAO,GAAG;AACdxB,EAAAA,SADc;AAEdQ,EAAAA;AAFc,CAAhB;AAKA,gBAAe,CAACiB,GAAD,EAAMC,GAAN,KAAc5B,QAAQ,CAAC2B,GAAD,EAAMC,GAAN,EAAWF,OAAX,CAArC","sourcesContent":["import NextAuth from 'next-auth'\nimport Providers from 'next-auth/providers'\n\n\nconst providers = [\n    Providers.GitHub({\n        clientId: process.env.GITHUB_CLIENT_ID,\n        clientSecret: process.env.GITHUB_CLIENT_SECRET\n    })\n]\n\nconst callbacks = {}\n\ncallbacks.signIn = async function signIn(user, account, metadata) {\n    const emailRes = await fetch('https://api.github.com/user/emails', {\n      headers: {\n        'Authorization': `token ${account.accessToken}`\n      }\n    })\n    const emails = await emailRes.json()\n    const primaryEmail = emails.find(e => e.primary).email;\n  \n    user.email = primaryEmail;\n}\n\nconst options = {\n  providers,\n  callbacks\n}\n\nexport default (req, res) => NextAuth(req, res, options)"]},"metadata":{},"sourceType":"module"}